@Library('easyToBuy-Jenkins_SharedLib') _

pipeline {
   agent any
   environment{
     PATH = "/usr/share/maven/bin:$PATH"
   }
   stages {
      stage('Git Checkout') {
         steps {
            gitCheckout(
             checkout([$class: 'GitSCM',
                              branches: [[name: '*/master']],
                              userRemoteConfigs: [[url: 'https://github.com/MaruthamSatishReddy/EASY-TO-BUY-V2.git']]])
         }
      }
      stage('Maven Build') {
               steps {
                 dir('USER-SERVICE') {
                  mavenBuild()
                  }
               }
            }
      stage('Maven Unit Test') {
            steps {
              dir('USER-SERVICE') {
              mavenTest()
             }
            }
          }
      stage('Maven Integration Test') {
                  steps{
                  dir('USER-SERVICE') {
                  mavenIntegrationTest()
                    }
                  }
               }
           }
     }
